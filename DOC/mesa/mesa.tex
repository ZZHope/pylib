% *********** Document name and reference:
% Title of document
\renewcommand{\ndoctitle}{mesa.py: Mesa Data Structure} 
% Document category acronym 
\renewcommand{\ndocname}{mesa}                      
% svn dir
\renewcommand{\svndir}{svn://forum.astro.keele.ac.uk/utils/pylib}  
% Contributors to this document
\renewcommand{\ndoccontribs}{DAC}

\input{chap}

Document name: \ndocname \\
SVN directory: \svndir\\
Contributors: \ndoccontribs\\



{  \textbf{Abstract:} \slshape
A simple lession and tuitorial on using mesa.py in an effective and efficient manner
}
%##############################################################
%# Section: Introduction
%##############################################################

\section{Introduction}
\index{mesa}Welcome to the Ascii Table User Guide.  The purpose of mesa.py is
to provide a simple data structure to help the user work with simple data files. 
mesa.py contains the classes mesa\_profile and star\_log.
This document will provide the user with a 
tutorial and walkthrough of the tools contained within mesa\_profile and star\_log and
how a typical user would go about using and working with this python module.
\subsection{Disclaimer}
Programmers have a bad habbit of not updating documentation, espically then it is in  a .tex file.
It is then recommeded that the user look at the docstring contained within the pyhton script, there the information is more likely to be accurite up to date
, more about accessing that later
\section{Tutorial and Walkthough}

\subsection{Downloading and configuring}
Before the user can start working with mesa.py, they first must download the python 
module from svn:/ /forum.astro.keele.ac.uk/utils/pylib.  Also the user must download the python module data\_plot.py and utils.py. Once the package is placed in the filesystem, the user must add the location
of mesa.py to their python path.  What this means is that the user is telling python where to look when importing modules.
To do this:
\newline
A) Navigate to the location of mesa.py in a terminal and type,

\begin{verbatim}
pwd
\end{verbatim}

What should output is the location of mesa.py.
\newline
B) In a unix environment, open up your .bashrc file that is usually located in your home directory.  If it is not there, do not worry, it is a hidden file.
in the users home directory and open it.  If it does not exist, create it using a text editor.
Now in this .bashrc there may or may not be a line like:

\begin{verbatim}
export PYTHONPATH=/directory/:
\end{verbatim}

If there is add the location of mesa.py to the end of the line and a semi-colon.  It now should look like:

\begin{verbatim}
export PYTHONPATH=/directory/:/location/of/mesa.py:
\end{verbatim}

If that line did not already exist add this line to the .bashrc file.

\begin{verbatim}
export PYTHONPATH=$PYTHONPATH:/location/of/mesa.py:
\end{verbatim}

Now we must repeat these steps with data\_plot.py and utils.py unless if they are in the same directory as mesa.py, in which case everything is ready to go.


\subsection{Getting Started}
Here I will go about explaining how the user would go about using mesa.py for his or her purposes.
First in our python command line (accessed by typing the command 'python' in your terminal) or in a python script,
type the command:
\begin{verbatim}
>import mesa as ms
\end{verbatim}
Now, baring any errors mesa should be loaded into your command line or script, 
\begin{verbatim}
>s=ms.star_log('DIRECTORY')
\end{verbatim}
Where directory is the location of the mesa data files.
Now to create an instance of mesa\_profile type:
\begin{verbatim}
>a1=ms.mesa_profile('DIRECTORY',55000,num_type='model')
<100 in profiles.index file ...
<reading ./log87.data ...
\end{verbatim}
Where directory is the location of the mesa data files, 55000 is the log.data available. please consult the docsting for more information.
\subsection{Viewing Data}
Once the user has instantiated their instance, they are ready to start working with it.
One quick note, for the purposes of simplicity I will assume that the user has named
their instance, p.
\newline
To view the Header data of star\_log:
\begin{verbatim}
>s.header_attr
        Out[6]: 
        {'burn_min1': 50.0,
         'burn_min2': 1000.0,
         'c12_boundary_limit': 0.0001,
         'h1_boundary_limit': 0.0001,
         'he4_boundary_limit': 0.0001,
         'initial_mass': 2.0,
         'initial_z': 0.01}
\end{verbatim}
To view the Column data of star\_log:
\begin{verbatim}
> s.cols
        Out[7]: 
        {'center_c12': 38,
         'center_h1': 36,
         'center_he4': 37,
          ...
\end{verbatim}
Now lets get some data from a1
\begin{verbatim}
> T=a1.get('temperature')

> mass=a1.get('mmid')
\end{verbatim}
\subsection{Plotting Data}
To plot data, this guide recommends the user to download and install ipython, it will let the user to use plotting more dynamically. To install it go do http://ipython.scipy.org/moin/ and follow the links.
But before the user does this, check if your system has ipython already installed by typing ipython in a terminal.
\newline
To run ipython
\begin{verbatim}
ipython --pylab --q4thread
\end{verbatim}
(note: the argument --q4thread is a work around for a bug in ipyhthon 0.10.1, if a different version is in use, this may not be needed)
\newline
Now import mesa and create an instance as was documented in the Getting Started section.
For mesa, the DataPlot class in  data\_plot.py provides us with plot().
\newline
To use the plot method
\begin{verbatim}
p.plot(attriX, attriY)
\end{verbatim}
Where attriX is the name of the attribute of what the user wants on the X axis and attriY is the name of the attribute of what the user wants on the Y axis.
This method automatically generates the title, the legend and the X and Y axis lables.

\subsection{Methods And Functions}
To view more info about the Methods And Functions please type help(ms) if ms is what
the user imported mesa.py as.
		
\subsection{History} 
This document history complements the svn log.

\begin{tabular*}{\textwidth}{lll}
\hline
Authors & yymmdd & Comment \\
\hline
DAC & 101221 & generate template \\

\hline
\end{tabular*}


\subsection{Contact}
If any bugs do appear or if there are any questions, please email hoshi@uvic.ca
% --------------- latex template below ---------------------------
\begin{verbatim}

\end{verbatim}


%\begin{figure}[htbp]
%   \centering
%%   \includegraphics[width=\textwidth]{layers.jpg} % 
%      \caption{}   \includegraphics[width=0.48\textwidth]{FIGURES/HRD90ms.png}  
%   \includegraphics[width=0.48\textwidth]{FIGURES/HRD150ms.png}  
%
%   \label{fig:one}
%\end{figure}
%
%\begin{equation}
%Y\_a = Y\_k + \sum\_{i \neq k} Y\_i
%\end{equation}
%
%{
%%\color{ForestGreen}
%\sffamily 
%  {\center  --------------- \hfill {\bf START: Some special text} \hfill ---------------}\\
%$Y\_c$ does not contain ZZZ but we may assign one $Y_n$ to XYZ which is the decay product of the unstable nitrogen isotope JJHJ. %
%
%{\center ---------------  \hfill {\bf END:Some special text} \hfill ---------------}\\
%}
